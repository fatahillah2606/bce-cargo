{% extends 'admin/base.html' %}

<!-- Title -->
{% block title %}Pesanan masuk{% endblock %}

<!-- Style -->
{% block style %}
<link
    rel="stylesheet"
    href="{{url_for('static',filename='css/admin/dashboard.css')}}"
/>
{% endblock %}

<!-- Judul header -->
{% block judul %}Pesanan masuk{% endblock %}
<!-- Konten -->
{% block konten %}
<div class="p-5">
    <!-- Container utama -->
    <div class="bg-white rounded-xl shadow p-6 mb-6">
        <!-- Navigasi Tab -->
        <div class="mb-6 border-b border-gray-200">
            <div class="flex gap-2 text-sm font-medium text-gray-500">
                <button
                    class="relative px-4 py-2 text-green-600 font-semibold after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-full after:bg-green-500"
                >
                    Pesanan Masuk
                </button>
                <button class="px-4 py-2 hover:text-green-600 transition">
                    Riwayat Pesanan
                </button>
                <button class="px-4 py-2 hover:text-green-600 transition">
                    Status Pengiriman
                </button>
            </div>
        </div>

        <!-- List Pesanan Masuk -->
        <div class="space-y-4">
            <!-- Item 1 -->
            <div
                class="flex items-start gap-4 bg-gray-50 border border-gray-200 shadow-sm rounded-lg p-4"
            >
                <span class="material-symbols-rounded text-green-600 text-3xl"
                    >local_shipping</span
                >
                <div class="flex-1">
                    <p class="text-sm text-gray-700 mb-1">
                        <span class="font-semibold text-gray-900"
                            >BCE-U-240626-001</span
                        >
                        dari
                        <span class="font-medium">Fajar Prasetyo</span> meminta
                        pengiriman <span class="italic">Kargo Darat</span>.
                    </p>
                    <p class="text-xs text-gray-500">
                        Jakarta → Surabaya · 22 Juli 2025
                    </p>
                </div>
                <div>
                    <button
                        class="text-sm px-3 py-1.5 bg-green-500 text-white rounded-lg hover:bg-green-600 transition"
                        onclick="openModal('BCE-U-240626-001')"
                    >
                        Lihat
                    </button>
                </div>
            </div>

            <!-- Item 2 -->
            <div
                class="flex items-start gap-4 bg-gray-50 border border-gray-200 shadow-sm rounded-lg p-4"
            >
                <span class="material-symbols-rounded text-green-600 text-3xl"
                    >local_shipping</span
                >
                <div class="flex-1">
                    <p class="text-sm text-gray-700 mb-1">
                        <span class="font-semibold text-gray-900"
                            >BCE-D-160725-001</span
                        >
                        dari
                        <span class="font-medium">Dina Rahayu</span> meminta
                        pengiriman <span class="italic">Kargo Laut</span>.
                    </p>
                    <p class="text-xs text-gray-500">
                        Makassar → Balikpapan · 23 Juli 2025
                    </p>
                </div>
                <div>
                    <button
                        class="text-sm px-3 py-1.5 bg-green-500 text-white rounded-lg hover:bg-green-600 transition"
                        onclick="openModal('BCE-D-160725-001')"
                    >
                        Lihat
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Wrapper (pojok kanan atas) -->
    <div id="toastNotif" class="fixed bottom-5 right-5 z-50">
        <div
            class="flex items-start gap-3 bg-green-500 text-white px-4 py-3 rounded-xl shadow-lg animate-slide-in"
        >
            <span class="material-symbols-rounded text-2xl">check_circle</span>
            <div>
                <p class="text-sm font-medium">Pesanan Ditolak</p>
                <p id="toastMsg" class="text-xs">
                    Pesanan telah ditolak dan pelanggan telah diberi tahu.
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<!-- Overlay + Modal Wrapper -->
<div
    id="modalPesanan"
    class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50"
>
    <div class="bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative">
        <!-- Judul -->
        <h3 class="text-lg font-semibold text-gray-800 mb-4">
            Detail Pesanan - <span id="modalKode">BCE-U-240626-001</span>
        </h3>

        <!-- Isi Konten -->
        <div class="space-y-2 text-sm text-gray-700">
            <p>
                <strong>Nama Pelanggan:</strong>
                <span id="modalNama">Fajar Prasetyo</span>
            </p>
            <p>
                <strong>Layanan:</strong>
                <span id="modalLayanan">Kargo Darat</span>
            </p>
            <p><strong>Asal:</strong> <span id="modalAsal">Jakarta</span></p>
            <p>
                <strong>Tujuan:</strong> <span id="modalTujuan">Surabaya</span>
            </p>
            <p>
                <strong>Tanggal:</strong>
                <span id="modalTanggal">22 Juli 2025</span>
            </p>

            <!-- Input Nominal -->
            <div class="mt-4">
                <label
                    for="nominalInput"
                    class="block text-sm font-medium text-gray-600 mb-1"
                    >Nominal Harga (Rp)</label
                >
                <input
                    type="number"
                    id="nominalInput"
                    class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                    placeholder="Contoh: 150000"
                />
            </div>
        </div>

        <!-- Tombol Aksi -->
        <div class="mt-6 flex justify-end gap-2">
            <button
                onclick="terimaPesanan()"
                id="btnTerima"
                class="bg-green-500 text-white px-4 py-2 rounded-lg disabled:opacity-50"
                disabled
            >
                Terima
            </button>
            <button
                onclick="tolakPesanan()"
                class="bg-red-500 text-white px-4 py-2 rounded-lg"
            >
                Tolak
            </button>
            <button
                onclick="tutupModal()"
                class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg"
            >
                Tutup
            </button>
        </div>
    </div>
</div>

{% endblock %}
