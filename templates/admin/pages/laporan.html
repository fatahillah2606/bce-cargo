{% extends 'admin/base.html' %}

<!-- Title -->
{% block title %}Laporan Transaksi{% endblock %}

<!-- Style -->
{% block style %} {% endblock %}

<!-- Judul header -->
{% block judul %}Laporan Transaksi{% endblock %}
<!-- Konten -->
{% block konten %}
<div class="p-4">
    <div class="bg-white rounded-xl shadow p-6 mb-6">
        <h2 class="text-lg font-semibold text-zinc-800 mb-4">
            Filter Periode Transaksi
        </h2>
        <form class="grid md:grid-cols-3 gap-4 items-end">
            <!-- Dari Tanggal -->
            <div>
                <label
                    for="startDate"
                    class="block text-sm font-medium text-zinc-700 mb-1"
                    >Dari Tanggal</label
                >
                <input
                    type="date"
                    id="startDate"
                    name="start_date"
                    class="w-full px-4 py-2 border border-zinc-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                />
            </div>

            <!-- Sampai Tanggal -->
            <div>
                <label
                    for="endDate"
                    class="block text-sm font-medium text-zinc-700 mb-1"
                    >Sampai Tanggal</label
                >
                <input
                    type="date"
                    id="endDate"
                    name="end_date"
                    class="w-full px-4 py-2 border border-zinc-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                />
            </div>

            <!-- Tombol Terapkan -->
            <div>
                <button
                    type="submit"
                    class="w-full bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600"
                >
                    Terapkan
                </button>
            </div>
        </form>
    </div>

    <!-- Ringkasan statistik -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
        <!-- Total Pesanan -->
        <div class="bg-white rounded-xl shadow p-4">
            <p class="text-sm text-zinc-500">Total Pesanan</p>
            <h3 class="text-xl font-bold text-zinc-800 mt-2">120</h3>
        </div>

        <!-- Total Invoice -->
        <div class="bg-white rounded-xl shadow p-4">
            <p class="text-sm text-zinc-500">Total Invoice Dibuat</p>
            <h3 class="text-xl font-bold text-zinc-800 mt-2">100</h3>
        </div>

        <!-- Total Pendapatan -->
        <div class="bg-white rounded-xl shadow p-4">
            <p class="text-sm text-zinc-500">Total Pendapatan</p>
            <h3 class="text-xl font-bold text-zinc-800 mt-2">Rp 25.000.000</h3>
        </div>

        <!-- Pelanggan Unik -->
        <div class="bg-white rounded-xl shadow p-4">
            <p class="text-sm text-zinc-500">Jumlah Pelanggan Unik</p>
            <h3 class="text-xl font-bold text-zinc-800 mt-2">72</h3>
        </div>
    </div>

    <!-- Grafik transaksi -->
    <div class="bg-white rounded-xl shadow p-6 mb-6">
        <h2 class="text-lg font-semibold text-zinc-800 mb-4">
            Grafik Transaksi
        </h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Line Chart: Pendapatan -->
            <div>
                <h3 class="text-sm font-medium text-zinc-700 mb-2">
                    Tren Pendapatan Harian (Rp)
                </h3>
                <div class="w-full max-w-full h-[250px]">
                    <canvas id="lineChart"></canvas>
                </div>
            </div>

            <!-- Bar Chart: Jumlah Pesanan -->
            <div>
                <h3 class="text-sm font-medium text-zinc-700 mb-2">
                    Jumlah Pesanan Harian
                </h3>
                <div class="w-full max-w-full h-[250px]">
                    <canvas id="barChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Tabel laporan -->
    <div class="bg-white rounded-xl shadow p-6">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-semibold text-zinc-800">
                Detail Laporan Transaksi
            </h2>
            <div class="flex gap-2">
                <button
                    class="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-600"
                >
                    Unduh PDF
                </button>
                <!-- <button
                    class="bg-green-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-green-600"
                >
                    Unduh Excel
                </button> -->
            </div>
        </div>

        <div class="overflow-x-auto">
            <table class="min-w-full text-sm text-left text-zinc-700">
                <thead class="text-xs text-zinc-500 uppercase bg-zinc-100">
                    <tr>
                        <th class="px-4 py-3">Kode Invoice</th>
                        <th class="px-4 py-3">Kode Pesanan</th>
                        <th class="px-4 py-3">Pelanggan</th>
                        <th class="px-4 py-3">Moda</th>
                        <th class="px-4 py-3">Tanggal</th>
                        <th class="px-4 py-3">Total</th>
                        <th class="px-4 py-3">Status</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-zinc-200">
                    <!-- Dummy row 1 -->
                    <tr>
                        <td class="px-4 py-3 font-medium text-zinc-800">
                            INV-220725-001
                        </td>
                        <td class="px-4 py-3">BCE-D-220725-001</td>
                        <td class="px-4 py-3">Fajar Prasetyo</td>
                        <td class="px-4 py-3">Darat</td>
                        <td class="px-4 py-3">22 Jul 2025</td>
                        <td class="px-4 py-3">Rp 150.000</td>
                        <td class="px-4 py-3">
                            <span
                                class="inline-block px-2 py-1 text-xs text-white bg-green-500 rounded-full"
                            >
                                Lunas
                            </span>
                        </td>
                    </tr>

                    <!-- Dummy row 2 -->
                    <tr>
                        <td class="px-4 py-3 font-medium text-zinc-800">
                            INV-200725-002
                        </td>
                        <td class="px-4 py-3">BCE-U-200725-002</td>
                        <td class="px-4 py-3">Dina Rahayu</td>
                        <td class="px-4 py-3">Udara</td>
                        <td class="px-4 py-3">20 Jul 2025</td>
                        <td class="px-4 py-3">Rp 250.000</td>
                        <td class="px-4 py-3">
                            <span
                                class="inline-block px-2 py-1 text-xs text-white bg-yellow-500 rounded-full"
                            >
                                Belum Dibayar
                            </span>
                        </td>
                    </tr>

                    <!-- Tambah baris lainnya sesuai data -->
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %} {% block kontenjs %}
<!-- Konten js -->
<script>
    // Data dummy
    const labels = [
        "19 Jul",
        "20 Jul",
        "21 Jul",
        "22 Jul",
        "23 Jul",
        "24 Jul",
        "25 Jul",
    ];

    const pendapatanData = [
        1000000, 1500000, 800000, 2000000, 1700000, 1300000, 2500000,
    ];
    const pesananData = [5, 7, 3, 9, 6, 4, 8];

    // Line Chart
    const ctxLine = document.getElementById("lineChart").getContext("2d");
    new Chart(ctxLine, {
        type: "line",
        data: {
            labels: labels,
            datasets: [
                {
                    label: "Pendapatan",
                    data: pendapatanData,
                    fill: false,
                    borderColor: "rgb(34 197 94)", // Tailwind green-500
                    tension: 0.3,
                },
            ],
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    ticks: {
                        callback: (value) => "Rp " + value.toLocaleString(),
                    },
                },
            },
        },
    });

    // Bar Chart
    const ctxBar = document.getElementById("barChart").getContext("2d");
    new Chart(ctxBar, {
        type: "bar",
        data: {
            labels: labels,
            datasets: [
                {
                    label: "Pesanan",
                    data: pesananData,
                    backgroundColor: "rgb(59 130 246)", // Tailwind blue-500
                },
            ],
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        precision: 0,
                    },
                },
            },
        },
    });
</script>
{% endblock %}
