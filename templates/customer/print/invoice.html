<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Invoice #{{detail_invoice.kode_invoice}} | CV. Bahtera Cahaya
            Express
        </title>
        <!-- Favicon -->
        <link
            rel="icon"
            type="image/x-icon"
            href="{{ url_for('static', filename='images/favicon.ico') }}"
        />
        <!-- Flowbite -->
        <link
            rel="stylesheet"
            href="{{url_for('static',filename='dist/output.css')}}"
        />
        <!-- Google Icon -->
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        />
        <!-- Print Styles -->
        <style>
            @media print {
                body {
                    background: white !important;
                    color: black !important;
                    margin: 0;
                    font-size: 12pt;
                }
                img {
                    max-height: 50px;
                }
                .no-print {
                    display: none !important;
                }
                table {
                    border-collapse: collapse;
                }
            }
        </style>
    </head>
    <body>
        <!-- Invoice Print-Friendly -->
        <div class="max-w-4xl mx-auto bg-white text-black p-8">
            <!-- Logo BCE -->
            <div class="mb-6 flex items-center gap-3">
                <img
                    src="{{url_for('static', filename='images/logo.png')}}"
                    alt="Logo BCE"
                    class="w-12 h-12"
                />
                <span class="text-2xl font-bold"
                    >CV. Bahtera Cahaya Express</span
                >
            </div>

            <!-- Header Invoice -->
            <div
                class="flex items-center justify-between mb-6 border-y border-zinc-300 py-4"
            >
                <h2 class="text-xl font-semibold">
                    Invoice #{{detail_invoice.kode_invoice}}
                </h2>
                <p class="text-gray-600">
                    Tanggal: {{detail_invoice.tanggal_invoice}}
                </p>
            </div>

            <!-- Pay To / Invoice To -->
            <div class="flex justify-between gap-6 mb-8 text-sm">
                <div class="w-1/2">
                    <h4 class="font-semibold text-lg mb-2">Pay to:</h4>
                    <p>BCE Cargo, Indonesia</p>
                    <p>
                        Ware House Area Regulated Agent PT. Gatrans Soekarno
                        Hatta Air Port
                    </p>
                    <p>NPWP: 63.410.875.7 - 402.000</p>
                </div>
                <div class="w-1/2">
                    <h4 class="font-semibold text-lg mb-2">Invoice to:</h4>
                    <p>{{data_pemesanan.nama_pengirim}}</p>
                    <p>{{data_pemesanan.alamat_pengirim}}</p>
                    <p>{{data_pemesanan.no_hp_pengirim}}</p>
                </div>
            </div>

            <!-- Tabel Barang -->
            <table class="w-full text-sm border border-zinc-300 mb-6">
                <thead
                    class="bg-gray-100 text-gray-700 border-b border-zinc-300"
                >
                    <tr>
                        <th class="px-4 py-2 border-r">Nama Barang</th>
                        <th class="px-4 py-2 border-r">Jumlah</th>
                        <th class="px-4 py-2 border-r">Dimensi (cm)</th>
                        <th class="px-4 py-2 border-r">Kategori</th>
                        <th class="px-4 py-2">Metode Pengiriman</th>
                    </tr>
                </thead>
                <tbody>
                    {% for barang in data_barang %}
                    <tr class="border-b border-zinc-300">
                        <td class="px-4 py-2 border-r">
                            {{ barang.nama_barang }}
                        </td>
                        <td class="px-4 py-2 border-r">{{ barang.jumlah }}</td>
                        <td class="px-4 py-2 border-r">
                            {{ barang.dimensi_cm.panjang }} x {{
                            barang.dimensi_cm.lebar }} x {{
                            barang.dimensi_cm.tinggi }}
                        </td>
                        <td class="px-4 py-2 border-r">
                            {{ barang.kategori_id.nama_kategori }}
                        </td>
                        <td class="px-4 py-2">
                            {{ barang.metode_pengiriman }}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!-- Order Summary -->
            <div>
                <h4 class="text-md font-semibold mb-2">Order summary</h4>
                <table class="w-full text-sm border border-zinc-300">
                    <tbody>
                        <tr class="border-b border-zinc-300">
                            <td class="px-4 py-2">Subtotal</td>
                            <td class="px-4 py-2 text-right font-medium">
                                {{detail_invoice.rincian_pembayaran.subtotal}}
                            </td>
                        </tr>
                        <tr class="border-b border-zinc-300">
                            <td class="px-4 py-2">Biaya Surcharge</td>
                            <td class="px-4 py-2 text-right font-medium">
                                {{detail_invoice.rincian_pembayaran.surcharge_dg}}
                            </td>
                        </tr>
                        <tr class="border-b border-zinc-300">
                            <td class="px-4 py-2">Biaya Packing</td>
                            <td class="px-4 py-2 text-right font-medium">
                                {{detail_invoice.rincian_pembayaran.biaya_packing}}
                            </td>
                        </tr>
                        <tr class="border-b border-zinc-300">
                            <td class="px-4 py-2">Diskon</td>
                            <td class="px-4 py-2 text-right font-medium">
                                {{detail_invoice.rincian_pembayaran.diskon}}%
                            </td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 font-bold">Total</td>
                            <td
                                class="px-4 py-2 text-right font-bold text-green-600"
                            >
                                {{detail_invoice.rincian_pembayaran.total}}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <script>
            window.addEventListener("load", function () {
                window.print();
            });
        </script>
    </body>
</html>
